Bootstrap: docker
From: debian:bookworm-slim

%files
    ./include
    ./lib
    ./src
    CMakeLists.txt
    matrixA.txt
    matrixB.txt

%post
    apt-get update && 
    apt-get upgrade -y && 
    apt-get autoremove -y &&
    apt-get clean -y &&
    apt-get -y install g++ cmake mpich &&
    apt-get autoremove -y &&
    apt-get clean -y

%runscript
    mkdir -p build && cd build
    cmake ..
    cmake --build .
    cp ../matrixA.txt ./build
    cp ../matrixB.txt ./build
    mpirun -np 2 ./main