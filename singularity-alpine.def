Bootstrap: docker
From: alpine:3.20.0

%files
    ./include /container-prj/include
    ./lib /container-prj/lib
    ./src /container-prj/src
    ./test /container-prj/test
    CMakeLists.txt /container-prj/CMakeLists.txt
    matrixA.txt /container-prj/matrixA.txt
    matrixB.txt /container-prj/matrixB.txt

%post
    apk update && apk add --no-cache g++ make cmake openmpi-dev

%runscript
    cmake -S . -B build
    cmake --build build
    cd build 
    ctest --rerun-failed --output-on-failure